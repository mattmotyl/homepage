<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Warehouses &amp; Modeling | Platform Data Handbook</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  </head>
  <body>
    <header>
      <div class="header-inner">
        <div class="brand">
          <span>Matt Motyl</span>
          <span>Platform Data Handbook</span>
        </div>
        <nav aria-label="Primary">
          <ul>
            <li><a href="index.html">Welcome</a></li>
            <li><a href="foundations.html">Data Foundations</a></li>
            <li><a href="warehouses.html" aria-current="page">Warehouses</a></li>
            <li><a href="workflows.html">Workflows</a></li>
            <li><a href="comparisons.html">Comparisons</a></li>
            <li><a href="engage.html">Engage</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <h1>Warehouses &amp; Modeling</h1>
      <p>
        Even if platforms deliver CSVs or dashboards, you’ll unlock the most value when you reshape them into a warehouse with consistent grain. This section introduces dimensional modeling with a diagram you can adapt to your own research pipelines.
      </p>

      <section class="section">
        <h2>Fact and dimension at a glance</h2>
        <div class="fact-dimension">
          <div>
            <p>
              <strong>Fact tables</strong> capture events that can be counted: impressions, watch hours, violations, or recommendation outputs. They’re long, skinny tables with a timestamp and one row per combination of descriptive keys.
            </p>
            <p>
              <strong>Dimension tables</strong> provide the human-readable labels you join onto the fact table—platform names, content formats, region codes, enforcement policy buckets.
            </p>
            <p class="highlight">
              When you request data from a VLOPSE, ask which fields form the primary key. That tells you the natural grain you must preserve when cleaning the dataset.
            </p>
          </div>
          <div>
            <svg viewBox="0 0 500 380" role="img" aria-labelledby="diagram-title">
              <title id="diagram-title">Dimensional model for engagement data</title>
              <rect x="180" y="140" width="140" height="120" rx="16" fill="#f97316" opacity="0.18" />
              <rect x="190" y="150" width="120" height="100" rx="12" fill="#f97316" />
              <text x="250" y="180" text-anchor="middle" fill="#0f172a" font-weight="600">fact_engagements</text>
              <text x="250" y="205" text-anchor="middle" fill="#0f172a" font-size="13">snapshot_date</text>
              <text x="250" y="225" text-anchor="middle" fill="#0f172a" font-size="13">platform_id</text>
              <text x="250" y="245" text-anchor="middle" fill="#0f172a" font-size="13">content_type_id</text>
              <text x="250" y="265" text-anchor="middle" fill="#0f172a" font-size="13">impressions · watch_hours</text>

              <rect x="40" y="40" width="140" height="100" rx="12" fill="#1e2a5a" />
              <text x="110" y="75" text-anchor="middle" fill="#ffffff" font-weight="600">dim_platform</text>
              <text x="110" y="98" text-anchor="middle" fill="#e2e8f0" font-size="13">platform_id</text>
              <text x="110" y="118" text-anchor="middle" fill="#e2e8f0" font-size="13">name</text>
              <text x="110" y="138" text-anchor="middle" fill="#e2e8f0" font-size="13">region</text>

              <rect x="320" y="40" width="140" height="100" rx="12" fill="#1e2a5a" />
              <text x="390" y="75" text-anchor="middle" fill="#ffffff" font-weight="600">dim_content_type</text>
              <text x="390" y="98" text-anchor="middle" fill="#e2e8f0" font-size="13">content_type_id</text>
              <text x="390" y="118" text-anchor="middle" fill="#e2e8f0" font-size="13">label</text>
              <text x="390" y="138" text-anchor="middle" fill="#e2e8f0" font-size="13">description</text>

              <line x1="160" y1="140" x2="230" y2="150" stroke="#1e2a5a" stroke-width="3" marker-end="url(#arrow)" />
              <line x1="340" y1="140" x2="270" y2="150" stroke="#1e2a5a" stroke-width="3" marker-end="url(#arrow)" />

              <defs>
                <marker id="arrow" markerWidth="10" markerHeight="10" refX="6" refY="3" orient="auto">
                  <path d="M0,0 L0,6 L6,3 z" fill="#1e2a5a" />
                </marker>
              </defs>
            </svg>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>Checklist for your warehouse request</h2>
        <div class="card-grid">
          <article class="card">
            <h3>Confirm the grain</h3>
            <p>Is each row a piece of content, a user cohort, or an aggregated statistic? Request the exact primary key fields.</p>
          </article>
          <article class="card">
            <h3>Ask for lookup tables</h3>
            <p>Platform taxonomies change often. Request dimension tables (e.g., policy buckets, content format codes) alongside the fact tables.</p>
          </article>
          <article class="card">
            <h3>Specify refresh cadence</h3>
            <p>Understanding how frequently the data refreshes helps you choose the right snapshot for longitudinal analyses.</p>
          </article>
          <article class="card">
            <h3>Clarify suppression rules</h3>
            <p>Document the thresholds for redaction or aggregation so your statistical tests account for any noise introduced.</p>
          </article>
        </div>
      </section>

      <section class="section">
        <h2>Example schema questions for VLOPSEs</h2>
        <ul>
          <li>Which fields should we treat as stable identifiers across refreshes?</li>
          <li>Are moderation outcomes reported before or after appeals are processed?</li>
          <li>How are duplicates handled for cross-posted content?</li>
          <li>What caveats should we note when communicating findings to the public?</li>
        </ul>
      </section>
    </main>

    <footer>
      <div class="footer-inner">
        <strong>Want feedback on your schema?</strong>
        <span>Matt regularly reviews Article 40 data pipelines and can help de-risk your modeling choices.</span>
        <span>© <span id="year"></span> Matt Motyl.</span>
      </div>
    </footer>
    <script src="assets/js/main.js"></script>
  </body>
</html>
